cases:
- name: package.json
  type: actor
  dockerfile: Dockerfile
  repo_contents: test/actor/basic/base
  input_data_path: test/actor/basic/input_dependencies.json
  output_data_path: test/actor/basic/output_dependencies.json
  tests:
    - |
        git checkout deps/update-0 && \
        diff -x ".git*" -x "node_modules" ${CWD}/test/actor/basic/final/ ./

- name: package-lock.json
  type: actor
  dockerfile: Dockerfile
  repo_contents: test/actor/package_lock/base
  input_data_path: test/actor/package_lock/input_dependencies.json
  output_data_path: test/actor/package_lock/output_dependencies.json

- name: yarn.lock
  type: actor
  dockerfile: Dockerfile
  repo_contents: test/actor/yarn/base
  input_data_path: test/actor/yarn/input_dependencies.json
  output_data_path: test/actor/yarn/output_dependencies.json

- name: yarn.lock with caret and tilde
  type: actor
  dockerfile: Dockerfile
  repo_contents: test/actor/yarn/ranges
  input_data_path: test/actor/yarn/ranges_input_dependencies.json
  output_data_path: test/actor/yarn/ranges_output_dependencies.json

- name: yarn.lock with bounds update
  type: actor
  dockerfile: Dockerfile
  repo_contents: test/actor/yarn/ranges_and_bounds
  input_data_path: test/actor/yarn/ranges_input_dependencies.json
  output_data_path: test/actor/yarn/ranges_and_bounds_output_dependencies.json
  tests:
    - |
        git checkout deps/update-0 && \
        diff ./package.json ./final-package.json
  user_config:
    settings:
      update_package_json_lower_bounds: true

- name: package.json subdirectory
  type: actor
  dockerfile: Dockerfile
  repo_contents: test/actor/subdirectory/base
  input_data_path: test/actor/subdirectory/input_dependencies.json
  output_data_path: test/actor/subdirectory/output_dependencies.json

- name: package.json basic with registry mirror
  type: actor
  dockerfile: Dockerfile
  repo_contents: test/actor/basic/base
  input_data_path: test/actor/basic/input_dependencies.json
  output_data_path: test/actor/basic/output_dependencies.json
  user_config:
    settings:
      npmrc: |
        registry=https://skimdb.npmjs.com/registry
        another=tes
      commit_message_prefix: "deps: "
  tests:
    - |
        git checkout deps/update-0 && \
        diff -x ".git*" -x "node_modules" ${CWD}/test/actor/basic/final/ ./
